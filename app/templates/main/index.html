<!doctype html>

<html lang="en">
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<style>
  * {
    padding: 0px;
    margin: 0;
    font-family: Century Gothic;
    font-size:14px;
  }
  .fit { /* set relative picture size */
    max-width: 80%;
    max-height: 100%;
  }
  .fitfull { /* set relative picture size */
    max-width: 100%;
    max-height: 100%;
  }
  .center {
    display: block;
    margin: auto;
  }
  td {
    padding: 2px;
  }
  .bar {
  fill: steelblue;
  }

  .bar:hover {
    fill: brown;
  }

  .axis--x path {
    display: none;
  }
</style>
  <meta charset="utf-8">

  <title>Home Affordability with Airbnb</title>

  <meta name="description" content="Home Affordability with Airbnb">
  <meta name="author" content="Galvanize - John Kim">

  <script type="text/javascript"
          src="{{ url_for('static', filename='jquery.js') }}">
  </script>
  <script type="text/javascript"
          src="{{ url_for('static', filename='app.js') }}">
  </script>
  <!--
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu-916DdpKAjTmJNIgngS6HL_kDIKU0aU&callback=myMap"></script>
  -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDjsflaax8lXnpSy3zggljklszzlQpstCs&callback=myMap"></script>
</head>
<body>

</script>
  <img class="center fit" width=1200 src='https://s3-us-west-2.amazonaws.com/airbnbpredictors3/main_banner_v01.gif'>

  <table class="center fitfull" width=1200 cellpadding=0>
    <tr>
      <td valign=top width=250>
      <img class="fitfull" src='https://s3-us-west-2.amazonaws.com/airbnbpredictors3/left_rooms.png'>
      </td>
      <td valign=top width=20>
      </td>
      <td valign=top align=left>
        <h2>Home Affordability with Airbnb</h2>
        <p>Home affordability has become a major challenge in the Greater Seattle Area (47.6062° N, 122.3321° W).
          Fortunately, homeowners now have the option to Airbnb rooms in their new
          homes to help pay for the mortgage. </p>

        <p>Using machine learning models, this projects aims to estimate the monthly
           income from renting our a room on Airbnb. </p>

        <input id="addressinput" type="text" style="width: 400px" placeholder='111 S Jackson St, Seattle, WA 98104'/>
        <input id="Button1" style="font-size : 15px" type="button" value="Find" onclick="return Button1_onclick()"/>
        <br><br>
        <div id="map" class='fitfull' style="width:500px;height:250px;background:yellow"></div>

      </td>
      <td valign=top width=50>
      </td>
      <td valign=top align=left width=400>
        <h2>Prediction</h2>

        <table>
          <tr>
            <td>
              <div class="form-group">
                <label for="lat">Latitude:</label>
                <input class="form-control" type="text" id="lat" style="font-size : 20px"  placeholder='47.6062'></input>
              </div>
            </td>
            <td>
              <div class="form-group">
                <label for="lng">Longitude:</label>
                <input class="form-control" type="text" id="lng" style="font-size : 20px" placeholder='122.3321'></input>
              </div>
          </td>
            <td colspan=2 valign=bottom>
              <div class="form-group">
                <button type="button" id="predict" class="btn btn-default" style="font-size : 15px">Predict!</button>
              </div>
            </td>
          </tr>
       </table>
       <br>

       <img id='monthly_inc' alt="Chart Placeholder" class="fitfull" src='../../static/monthly_income.png' hidden>
       <!-- Image placeholder
       <img class="fit center" src='https://s3-us-west-2.amazonaws.com/airbnbpredictors3/ex_55.png'>
       <span style="font-size:30px;font-family:impact;color=#D8D8D8">$</span>
       -->

       <span id="predict" style="font-size:30px;font-family:impact;color:#0099DF"></span>

       <svg width="400" height="250"></svg>

      </td>
      <td width=15></td>
    </tr>
  </table>

  <script language="javascript" type="text/javascript">

      var map;
      var geocoder;
      function InitializeMap() {

          var latlng = new google.maps.LatLng(47.6062, -122.3321);
          var myOptions =
          {
              zoom: 13,
              center: latlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              disableDefaultUI: true
          };
          map = new google.maps.Map(document.getElementById("map"), myOptions);
      }

      function FindLocation() {
          geocoder = new google.maps.Geocoder();
          InitializeMap();

          var address = document.getElementById("addressinput").value;
          geocoder.geocode({ 'address': address }, function (results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                  map.setCenter(results[0].geometry.location);
                  var marker = new google.maps.Marker({
                      map: map,
                      position: results[0].geometry.location
                  });

              }
              else {
                  alert("Geocode was not successful for the following reason: " + status);
              }
          });

      }


      function Button1_onclick() {
          FindLocation();
      }

      window.onload = InitializeMap;

  </script>


</body>
</html>
